{"openapi":"3.0.0","info":{"title":"smartcity-api","version":"1.0.0"},"paths":{"/user/login":{"post":{"tags":["User"],"description":"Send a token for authentication","requestBody":{"description":"Login for connexion","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Login"}}}},"responses":{"200":{"description":"a JWT token","content":{"text/plain":{"schema":{"type":"string"}}}},"400":{"description":"Input error(s)"},"404":{"description":"User not found"},"500":{"description":"Internal servor error"}}}},"/user/registration":{"post":{"tags":["User"],"requestBody":{"$ref":"#/components/requestBodies/UserToInsert"},"responses":{"201":{"$ref":"#/components/responses/UserInsert"},"400":{"description":"Input error(s)"},"409":{"description":"Conflic email already exists"},"500":{"description":"Internal servor error"}}}},"/user":{"get":{"tags":["User"],"security":[{"bearerAuth":[]}],"responses":{"200":{"$ref":"#/components/responses/UsersFound"},"400":{"description":"Input error(s)"},"401":{"description":"The current user is not authenticated"},"403":{"$ref":"#/components/responses/MustBeManager"},"404":{"description":"User not found"},"500":{"description":"Internal servor error"}}}},"/user/{userId}":{"get":{"tags":["User"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"userId","description":"User identifier","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"204":{"$ref":"#/components/responses/UserFound"},"400":{"description":"Input error(s)"},"401":{"description":"The current user is not authenticated"},"403":{"$ref":"#/components/responses/MustBeManagerOrCreator"},"404":{"description":"User not found"},"500":{"description":"Internal servor error"}}}},"/user/update":{"patch":{"tags":["User"],"security":[{"bearerAuth":[]}],"requestBody":{"$ref":"#/components/requestBodies/UserToUpdate"},"responses":{"204":{"$ref":"#/components/responses/UserUpdated"},"400":{"description":"Input error(s)"},"401":{"$ref":"#/components/responses/MissingJWT"},"500":{"description":"Internal servor error"}}}},"/user/{userId}/role":{"patch":{"tags":["User"],"requestBody":{"$ref":"#/components/requestBodies/RoleToChangeTo"},"security":[{"bearerAuth":[]}],"parameters":[{"name":"userId","description":"User identifier","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"204":{"$ref":"#/components/responses/RoleChanged"},"400":{"$ref":"#/components/responses/InputErrors"},"401":{"$ref":"#/components/responses/Unauthenticated"},"403":{"$ref":"#/components/responses/MustBeAdmin"},"404":{"$ref":"#/components/responses/UserNotFound"},"500":{"description":"Internal servor error"}}}}},"components":{"schemas":{"User":{"type":"object","properties":{"id":{"type":"number"},"name":{"type":"string"},"firstname":{"type":"string"},"birthdate":{"type":"string"},"email":{"type":"string"},"registrationDate":{"type":"string"},"gender":{"type":"string"},"height":{"type":"number"},"weight":{"type":"number"},"gsm":{"type":"string"},"role":{"type":"string"},"address":{"type":"object","properties":{"id":{"type":"number"},"country":{"type":"string"},"postalCode":{"type":"integer"},"city":{"type":"string"},"street":{"type":"string"},"number":{"type":"string"}}}}},"Login":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string","format":"password"}},"required":["email","password"]}},"responses":{"UserInsert":{"description":"the user has been added to database"},"UserUpdated":{"description":"the user has been updated"},"UsersFound":{"description":"send back a list of users","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"UserFound":{"description":"Send the user","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"InternalError":{"description":"Internal servor error"},"RoleChanged":{"description":"The role has been changed"},"InternalServorError":{"description":"Internal servor error"},"MissingJWT":{"description":"JWT is missing"},"Unauthenticated":{"description":"The user is not autenticated"},"MustBeManager":{"description":"The current user must be manager"},"MustBeManagerOrCreator":{"description":"The current user must be manager or creator"},"InputErrors":{"description":"There is one or more input errors"},"MustBeAdmin":{"description":"The user must be administrator"},"UserNotFound":{"description":"Can't find the current user"}},"requestBodies":{"UserToInsert":{"content":{"application/json":{"schema":{"properties":{"name":{"type":"string"},"firstname":{"type":"string"},"birthdate":{"type":"string"},"email":{"type":"string"},"password":{"type":"string","format":"password"},"gender":{"type":"string"},"height":{"type":"number"},"weight":{"type":"number"},"gsm":{"type":"string"},"address":{"type":"object","properties":{"country":{"type":"string"},"postalCode":{"type":"integer"},"city":{"type":"string"},"street":{"type":"string"},"number":{"type":"string"}}}},"required":["name","firstname","birthdate","email","password","gender","height","weight"]}}}},"UserToUpdate":{"content":{"application/json":{"schema":{"properties":{"name":{"type":"string"},"firstname":{"type":"string"},"birthdate":{"type":"string"},"password":{"type":"string","format":"password"},"height":{"type":"number"},"weight":{"type":"number"},"gsm":{"type":"string"}}}}}},"RoleToChangeTo":{"content":{"application/json":{"schema":{"properties":{"role":{"type":"string"}}}}}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}},"tags":[]}